#:include design/main/tabs/services_tab.kv
#:include design/main/tabs/shifts_tab.kv
#:include design/main/tabs/hourly_rate_tab.kv
#:include design/share/calendar_dialog.kv
#:include design/main/dialogs/notifications_dialog.kv
#:include design/main/dialogs/links_dialog.kv

<DrawerClickableItem@MDNavigationDrawerItem>
    focus_color: "#e7e4c0"
    text_color: "#4a4939"
    icon_color: "#4a4939"
    ripple_color: "#c5bdd2"
    selected_color: "#0c6c4d"


<DrawerLabelItem@MDNavigationDrawerItem>
    text_color: "#4a4939"
    icon_color: "#4a4939"
    focus_behavior: False
    selected_color: "#4a4939"
    _no_ripple_effect: True

<MainScreen>:
	name: 'mainScreen'
	mainScreenTabs: mainScreenTabsId
	servicesTab: servicesTabId
	shiftsTab: shiftsTabId
	hourlyRateTab: hourlyRateTabId

	MDBoxLayout:
		orientation: 'vertical'
		
		MDTopAppBar:
			orientation: 'horizontal'
			title: 'ZETSluzbe'
			anchor_title: 'left'
			#right_action_items: 
			#	[
			#	['calendar', lambda x: root.calendarButton()],
			#	['menu', lambda x: nav_drawer.set_state("open")]
			#	]
			
			
			MDIconButton:
				icon: 'calendar'
				on_release: root.calendarButton()
			
			MDIconButton:
				icon: 'menu'
				on_release: nav_drawer.set_state('open')
				
			#MDIconButton:
            #   icon: 'logout'
			#	on_release: root.logoutButton()
		
		MDTabs:
			id: mainScreenTabsId
			tab_hint_x: True
			
			ServicesTab:
				id: servicesTabId
				
			ShiftsTab: 
				id: shiftsTabId
				
			HourlyRateTab:
				id: hourlyRateTabId
				
	MDNavigationDrawer:
		id: nav_drawer
		anchor: 'right'
		radius: (16,0,0,16)
		size_hint_x: 0.3
		
		MDNavigationDrawerMenu:

			MDNavigationDrawerHeader:
				title: ''
				title_color: "#4a4939"
				text: "Izbornik"
				spacing: "4dp"
				padding: "12dp", 0, 0, "56dp"
				
			DrawerClickableItem:
				icon: 'message'
				#right_text: "+99"
				text_right_color: "#4a4939"
				text: 'Obavijesti'
				on_release: root.notificationsButton()
				
			DrawerClickableItem:
				icon: 'calendar'
				#right_text: "+99"
				text_right_color: "#4a4939"
				text: 'Kalendar'
				on_release: root.calendarButton()
				
			DrawerClickableItem:
				icon: "link"
				#right_text: "+99"
				text_right_color: "#4a4939"
				text: "Linkovi"
				on_release: root.linksButton()
				
			DrawerClickableItem:
				icon: "link"
				#right_text: "+99"
				text_right_color: "#4a4939"
				text: "Font"
				on_release: 
					mainScreenSliderId.disabled = not mainScreenSliderId.disabled

			MDNavigationDrawerDivider:
			
			DrawerClickableItem:
				icon: 'logout'
				#right_text: "+99"
				text_right_color: "#4a4939"
				text: 'Odjavi se'
				on_release: root.logoutButton()
			
	MainScreenSlider:
		id: mainScreenSliderId
		disabled: True if nav_drawer.state == 'close' else self.disabled
		size_hint: 0.3, 0.2 if not self.disabled else 0
		opacity: 1 if not self.disabled else 0 # safety
		pos_hint: {"x":0.35, "top": 1.04}
		value: int(app.fontSize[:-2])
		on_value_normalized: root.fontSizeSlider(self.value)
			